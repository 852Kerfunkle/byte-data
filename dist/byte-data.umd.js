(function (global, factory) {typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :typeof define === 'function' && define.amd ? define(['exports'], factory) :(factory((global.byteData = {})));}(this, (function (exports) {;'use strict';Object.defineProperty(exports, '__esModule', { value: true });var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(b,g,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,g,f){b!=Array.prototype&&b!=Object.prototype&&(b[g]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,g,f,l){if(g){f=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var h=b[l];h in f||(f[h]={});f=f[h]}b=b[b.length-1];l=f[b];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("String.prototype.codePointAt",function(b){return b?b:function(b){var f=$jscomp.checkStringArgs(this,null,"codePointAt"),g=f.length;b=Number(b)||0;if(0<=b&&b<g){b|=0;var h=f.charCodeAt(b);if(55296>h||56319<h||b+1===g)return h;b=f.charCodeAt(b+1);return 56320>b||57343<b?h:1024*(h-55296)+b+9216}}},"es6","es3");
var byteData=function(b){function g(a,c,d,e){d=void 0===d?0:d;e=void 0===e?a.length:e;if(e%c)throw Error("Bad buffer length.");for(;d<e;d+=c){var b=a,f=c,g=d;f--;for(var h=0;h<f;h++){var k=b[g+h];b[g+h]=b[g+f];b[g+f]=k;f--}}}function f(a){if(!a)throw Error("Undefined type.");if(a.float){if(-1==[16,32,64].indexOf(a.bits))throw Error("Bad float type.");}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);a.be=a.be||!1;q=a.float?16==a.bits?C:32==a.bits?
D:E:h;u=a.float?16==a.bits?F:32==a.bits?G:H:I;m=new k(64==a.bits?32:a.bits,a.float?!1:a.signed)}function l(a,c,d,e,b){if(void 0===a)throw Error("Undefined value.");if(null!==a&&-1==[Number,Boolean].indexOf(a.constructor))throw Error("Expected number, boolean or null; found "+a.constructor);for(;e<b;)e=u(d,a,e);c.be&&g(d,c.offset,e-c.offset,e);return e}function h(a,c){return m.read(a,c)}function C(a,c){a=m.read(a,c);c=(a&31744)>>10;var d=a&1023;return(c?Math.pow(2,c-15)*(1+d/1024):d/1024*.00006103515625)*
(a>>15?-1:1)}function D(a,c){n[0]=m.read(a,c);return r[0]}function E(a,c){n[v]=m.read(a,c);n[w]=m.read(a,c+4);return x[0]}function I(a,c,d){return m.write(a,c,d)}function F(a,c,d){r[0]=c;var e=n[0];c=e>>16&32768;var b=e>>12&2047;e=e>>23&255;103<=e&&(c=(c|e-112<<10|b>>1)+(b&1));a[d++]=c&255;a[d++]=c>>>8&255;return d}function G(a,c,d){r[0]=c;return m.write(a,n[0],d)}function H(a,c,d){x[0]=c;d=m.write(a,n[v],d);return m.write(a,n[w],d)}function y(a){for(var c=[],d=0;d<a.length;d++){var e=a.codePointAt(d);
if(128>e)c.push(e);else{var b=0,f=0;2047>=e?(b=1,f=192):65535>=e?(b=2,f=224):1114111>=e&&(b=3,f=240,d++);for(c.push((e>>6*b)+f);0<b;)c.push(128|e>>6*(b-1)&63),b--}}return c}function z(a,c,d,e){e=void 0===e?0:e;f(c);return l(a,c,d,e,e+c.offset)}function A(a,c,d,e){e=void 0===e?0:e;f(c);for(var b=0;b<a.length;b++)e=l(a[b],c,d,e,e+c.offset);return e}function B(a,c,d,e,b){e=void 0===e?0:e;b=void 0===b?a.length:b;for(f(c);(b-e)%c.offset;)b--;c.be&&g(a,c.offset);for(var t=0;e<b;e+=c.offset,t++)d[t]=q(a,
e);c.be&&g(a,c.offset)}var k=function(a,c){this.bits_=a;this.offset_=0;this.realBits_=this.bits_;this.lastByteMask_=255;a=Math.pow(2,this.bits_);c?(this.max_=a/2-1,this.min_=-a/2):(this.max_=a-1,this.min_=0);this.build_()};k.prototype.read=function(a,c){c=void 0===c?0:c;for(var d=0,e=this.offset_-1;0<e;e--)d|=a[e+c]<<8*e;d=(a[c]|d)>>>0;return this.overflow_(this.sign_(d))};k.prototype.write=function(a,c,d){d=void 0===d?0:d;a[d]=this.overflow_(c)&255;d++;for(var e=2;e<=this.offset_;e++,d++)a[d]=Math.floor(c/
Math.pow(2,8*(e-1)))&255;return d};k.prototype.writeEsoteric_=function(a,c,d){d=void 0===d?0:d;d=this.writeFirstByte_(a,this.overflow_(c),d);for(var e=2;e<this.offset_;e++,d++)a[d]=Math.floor(c/Math.pow(2,8*(e-1)))&255;8<this.bits_&&(a[d]=Math.floor(c/Math.pow(2,8*(this.offset_-1)))&this.lastByteMask_,d++);return d};k.prototype.readBits_=function(a,c){c=void 0===c?0:c;for(var d="",e=0;e<this.offset_;e++){var b=a[c+e].toString(2);d=Array(9-b.length).join("0")+b+d}return this.overflow_(this.sign_(parseInt(d,
2)))};k.prototype.build_=function(){this.setRealBits_();this.setLastByteMask_();this.offset_=8>this.bits_?1:Math.ceil(this.realBits_/8);if(this.realBits_!=this.bits_||8>this.bits_||32<this.bits_)this.write=this.writeEsoteric_,this.read=this.readBits_};k.prototype.sign_=function(a){a>this.max_&&(a-=2*this.max_+2);return a};k.prototype.overflow_=function(a){if(a>this.max_)throw Error("Overflow.");if(a<this.min_)throw Error("Underflow.");return a};k.prototype.setRealBits_=function(){this.realBits_=(this.bits_-
1|7)+1};k.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits_);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};k.prototype.writeFirstByte_=function(a,c,d){a[d]=8>this.bits_?0>c?c+Math.pow(2,this.bits_):c:c&255;return d+1};var p=0===(new Uint8Array((new Uint32Array([1])).buffer))[0],v=p?1:0,w=p?0:1;p=new Int8Array(8);var n=new Uint32Array(p.buffer),r=new Float32Array(p.buffer),x=new Float64Array(p.buffer),q,u,m={};b.unpackString=function(a,c,d){c=void 0===c?0:c;d=void 0===d?null:d;d=
null!==d?c+d:a.length;for(var e="";c<d;){var b=a[c++];if(0===b>>7)e+=String.fromCharCode(b);else{var f=0;6===b>>5?f=1:14===b>>4?f=2:30===b>>3&&(f=3);b&=(1<<8-f-1)-1;for(var g=0;g<f;g++)b=b<<6|a[c++]&63;65535>=b?e+=String.fromCharCode(b):(b-=65536,e+=String.fromCharCode((b>>10&1023)+55296,(b&1023)+56320))}}return e};b.packString=y;b.packStringTo=function(a,c,d){d=void 0===d?0:d;a=y(a);for(var b=0;b<a.length;b++)c[d++]=a[b];return d};b.pack=function(a,c){var d=[];z(a,c,d);return d};b.packArray=function(a,
c){var d=[];A(a,c,d);return d};b.packTo=z;b.packArrayTo=A;b.unpack=function(a,c,d){d=void 0===d?0:d;f(c);c.be&&g(a,c.offset,d,d+c.offset);var b=q(a,d);c.be&&g(a,c.offset,d,d+c.offset);return b};b.unpackArray=function(a,c,b,e){e=void 0===e?a.length:e;var d=[];B(a,c,d,void 0===b?0:b,e);return d};b.unpackArrayTo=B;return b}({});exports.unpackString = byteData.unpackString;exports.packString = byteData.packString;exports.packStringTo = byteData.packStringTo;exports.pack = byteData.pack;exports.packArray = byteData.packArray;exports.packTo = byteData.packTo;exports.packArrayTo = byteData.packArrayTo;exports.unpack = byteData.unpack;exports.unpackArray = byteData.unpackArray;exports.unpackArrayTo = byteData.unpackArrayTo;})));

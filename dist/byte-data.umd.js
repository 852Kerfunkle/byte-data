(function (global, factory) {typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :typeof define === 'function' && define.amd ? define(['exports'], factory) :(factory((global.byteData = {})));}(this, (function (exports) {;'use strict';Object.defineProperty(exports, '__esModule', { value: true });var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(b,g,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,g,f){b!=Array.prototype&&b!=Object.prototype&&(b[g]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,g,f,l){if(g){f=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var h=b[l];h in f||(f[h]={});f=f[h]}b=b[b.length-1];l=f[b];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("String.prototype.codePointAt",function(b){return b?b:function(b){var f=$jscomp.checkStringArgs(this,null,"codePointAt"),g=f.length;b=Number(b)||0;if(0<=b&&b<g){b|=0;var h=f.charCodeAt(b);if(55296>h||56319<h||b+1===g)return h;b=f.charCodeAt(b+1);return 56320>b||57343<b?h:1024*(h-55296)+b+9216}}},"es6","es3");
var byteData=function(b){function g(a,d,c,e){c=void 0===c?0:c;e=void 0===e?a.length:e;if(e%d)throw Error("Bad buffer length.");for(;c<e;c+=d){var b=a,f=d,g=c;f--;for(var h=0;h<f;h++){var k=b[g+h];b[g+h]=b[g+f];b[g+f]=k;f--}}}function f(a){if(!a)throw Error("Undefined type.");if(a.float){if(-1==[16,32,64].indexOf(a.bits))throw Error("Bad float type.");}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);r=a.float?16==a.bits?C:32==a.bits?D:E:h;t=a.float?
16==a.bits?F:32==a.bits?G:H:I;m=new k(64==a.bits?32:a.bits,a.float?!1:a.signed)}function l(a,d,c,e,b){if(void 0===a)throw Error("Undefined value.");if(null!==a&&-1==[Number,Boolean].indexOf(a.constructor))throw Error("Expected number, boolean or null; found "+a.constructor);for(;e<b;)e=t(c,a,e);d.be&&g(c,d.offset,e-d.offset,e);return e}function h(a,d){return m.read(a,d)}function C(a,d){a=m.read(a,d);d=(a&31744)>>10;var c=a&1023;return(d?Math.pow(2,d-15)*(1+c/1024):c/1024*.00006103515625)*(a>>15?-1:
1)}function D(a,d){n[0]=m.read(a,d);return q[0]}function E(a,d){n[u]=m.read(a,d);n[v]=m.read(a,d+4);return w[0]}function I(a,d,c){return m.write(a,d,c)}function F(a,d,c){q[0]=d;var e=n[0];d=e>>16&32768;var b=e>>12&2047;e=e>>23&255;103<=e&&(d=(d|e-112<<10|b>>1)+(b&1));a[c++]=d&255;a[c++]=d>>>8&255;return c}function G(a,d,c){q[0]=d;return m.write(a,n[0],c)}function H(a,d,c){w[0]=d;c=m.write(a,n[u],c);return m.write(a,n[v],c)}function x(a){for(var d=[],c=0;c<a.length;c++){var e=a.codePointAt(c);if(128>
e)d.push(e);else{var b=0,f=0;2047>=e?(b=1,f=192):65535>=e?(b=2,f=224):1114111>=e&&(b=3,f=240,c++);for(d.push((e>>6*b)+f);0<b;)d.push(128|e>>6*(b-1)&63),b--}}return d}function y(a,d,c,e){e=void 0===e?0:e;f(d);return l(a,d,c,e,e+d.offset)}function z(a,d,c,e){e=void 0===e?0:e;f(d);for(var b=0;b<a.length;b++)e=l(a[b],d,c,e,e+d.offset);return e}function A(a,d,c){c=void 0===c?0:c;f(d);if(d.offset+c>a.length)throw Error("Bad buffer length.");d.be&&g(a,d.offset,c,c+d.offset);var e=r(a,c);d.be&&g(a,d.offset,
c,c+d.offset);return e}function B(a,d,c,e,b){e=void 0===e?0:e;for(b=void 0===b?a.length:b;(b-e)%d.offset;)b--;for(var f=0;e<b;e+=d.offset,f++)c[f]=A(a,d,e)}var k=function(a,d){this.bits_=a;this.offset_=0;this.realBits_=this.bits_;this.lastByteMask_=255;a=Math.pow(2,this.bits_);d?(this.max_=a/2-1,this.min_=-a/2):(this.max_=a-1,this.min_=0);this.build_()};k.prototype.read=function(a,d){d=void 0===d?0:d;for(var c=0,e=this.offset_-1;0<e;e--)c|=a[e+d]<<8*e;c=(a[d]|c)>>>0;return this.overflow_(this.sign_(c))};
k.prototype.write=function(a,d,c){c=void 0===c?0:c;a[c]=this.overflow_(d)&255;c++;for(var e=2;e<=this.offset_;e++,c++)a[c]=Math.floor(d/Math.pow(2,8*(e-1)))&255;return c};k.prototype.writeEsoteric_=function(a,d,c){c=void 0===c?0:c;c=this.writeFirstByte_(a,this.overflow_(d),c);for(var e=2;e<this.offset_;e++,c++)a[c]=Math.floor(d/Math.pow(2,8*(e-1)))&255;8<this.bits_&&(a[c]=Math.floor(d/Math.pow(2,8*(this.offset_-1)))&this.lastByteMask_,c++);return c};k.prototype.readBits_=function(a,d){d=void 0===
d?0:d;for(var c="",e=0;e<this.offset_;e++){var b=a[d+e].toString(2);c=Array(9-b.length).join("0")+b+c}return this.overflow_(this.sign_(parseInt(c,2)))};k.prototype.build_=function(){this.setRealBits_();this.setLastByteMask_();this.offset_=8>this.bits_?1:Math.ceil(this.realBits_/8);if(this.realBits_!=this.bits_||8>this.bits_||32<this.bits_)this.write=this.writeEsoteric_,this.read=this.readBits_};k.prototype.sign_=function(a){a>this.max_&&(a-=2*this.max_+2);return a};k.prototype.overflow_=function(a){if(a>
this.max_)throw Error("Overflow.");if(a<this.min_)throw Error("Underflow.");return a};k.prototype.setRealBits_=function(){this.realBits_=(this.bits_-1|7)+1};k.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits_);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};k.prototype.writeFirstByte_=function(a,d,c){a[c]=8>this.bits_?0>d?d+Math.pow(2,this.bits_):d:d&255;return c+1};var p=0===(new Uint8Array((new Uint32Array([1])).buffer))[0],u=p?1:0,v=p?0:1;p=new Int8Array(8);var n=new Uint32Array(p.buffer),
q=new Float32Array(p.buffer),w=new Float64Array(p.buffer),r,t,m={};b.unpackString=function(a,d,c){d=void 0===d?0:d;c=void 0===c?null:c;c=null!==c?d+c:a.length;for(var e="";d<c;){var b=a[d++];if(0===b>>7)e+=String.fromCharCode(b);else{var f=0;6===b>>5?f=1:14===b>>4?f=2:30===b>>3&&(f=3);b&=(1<<8-f-1)-1;for(var g=0;g<f;g++)b=b<<6|a[d++]&63;65535>=b?e+=String.fromCharCode(b):(b-=65536,e+=String.fromCharCode((b>>10&1023)+55296,(b&1023)+56320))}}return e};b.packString=x;b.packStringTo=function(a,d,c){c=
void 0===c?0:c;a=x(a);for(var b=0;b<a.length;b++)d[c++]=a[b];return c};b.pack=function(a,d){var c=[];y(a,d,c);return c};b.packArray=function(a,d){var c=[];z(a,d,c);return c};b.packTo=y;b.packArrayTo=z;b.unpack=A;b.unpackArray=function(a,d,c,b){b=void 0===b?a.length:b;var e=[];B(a,d,e,void 0===c?0:c,b);return e};b.unpackArrayTo=B;return b}({});exports.unpackString = byteData.unpackString;exports.packString = byteData.packString;exports.packStringTo = byteData.packStringTo;exports.pack = byteData.pack;exports.packArray = byteData.packArray;exports.packTo = byteData.packTo;exports.packArrayTo = byteData.packArrayTo;exports.unpack = byteData.unpack;exports.unpackArray = byteData.unpackArray;exports.unpackArrayTo = byteData.unpackArrayTo;})));

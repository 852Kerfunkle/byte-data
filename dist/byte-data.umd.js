(function (global, factory) {typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :typeof define === 'function' && define.amd ? define(['exports'], factory) :(factory((global.byteData = {})));}(this, (function (exports) {;'use strict';Object.defineProperty(exports, '__esModule', { value: true });var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(b,g,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,g,f){b!=Array.prototype&&b!=Object.prototype&&(b[g]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,g,f,m){if(g){f=$jscomp.global;b=b.split(".");for(m=0;m<b.length-1;m++){var l=b[m];l in f||(f[l]={});f=f[l]}b=b[b.length-1];m=f[b];g=g(m);g!=m&&null!=g&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("String.prototype.codePointAt",function(b){return b?b:function(b){var f=$jscomp.checkStringArgs(this,null,"codePointAt"),g=f.length;b=Number(b)||0;if(0<=b&&b<g){b|=0;var l=f.charCodeAt(b);if(55296>l||56319<l||b+1===g)return l;b=f.charCodeAt(b+1);return 56320>b||57343<b?l:1024*(l-55296)+b+9216}}},"es6","es3");
var byteData=function(b){function g(a,c,d,e){d=void 0===d?0:d;e=void 0===e?a.length:e;if(e%c)throw Error("Bad buffer length.");for(;d<e;d+=c){var b=a,n=c,f=d;n--;for(var h=0;h<n;h++){var g=b[f+h];b[f+h]=b[f+n];b[f+n]=g;n--}}}function f(a){if(!a)throw Error("Undefined type.");if(a.float){if(-1==[16,32,64].indexOf(a.bits))throw Error("Bad float type.");}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);v=a.float?16==a.bits?l:32==a.bits?E:F:m;w=a.float?
16==a.bits?G:32==a.bits?H:I:J;k=new p(64==a.bits?32:a.bits,a.float?!1:a.signed)}function m(a,c){return k.read(a,c)}function l(a,c){a=k.read(a,c);c=(a&31744)>>10;var d=a&1023;return(c?Math.pow(2,c-15)*(1+d/1024):d/1024*.00006103515625)*(a>>15?-1:1)}function E(a,c){q[0]=k.read(a,c);return t[0]}function F(a,c){q[x]=k.read(a,c);q[y]=k.read(a,c+4);return z[0]}function J(a,c,d){return k.write(a,c,d)}function G(a,c,d){t[0]=c;var e=q[0];c=e>>16&32768;var b=e>>12&2047;e=e>>23&255;103<=e&&(c=(c|e-112<<10|b>>
1)+(b&1));a[d++]=c&255;a[d++]=c>>>8&255;return d}function H(a,c,d){t[0]=c;return k.write(a,q[0],d)}function I(a,c,d){z[0]=c;d=k.write(a,q[x],d);return k.write(a,q[y],d)}function A(a){for(var c=[],d=0;d<a.length;d++){var e=a.codePointAt(d);if(128>e)c.push(e);else{var b=0,f=0;2047>=e?(b=1,f=192):65535>=e?(b=2,f=224):1114111>=e&&(b=3,f=240,d++);for(c.push((e>>6*b)+f);0<b;)c.push(128|e>>6*(b-1)&63),b--}}return c}function B(a,c,d,e){return u([a],c,d,void 0===e?0:e)}function u(a,c,d,e){e=void 0===e?0:e;
f(c);for(var b=0;b<a.length;b++){if(void 0===a[b])throw Error("Undefined value.");var n=a[b];if(null!==n&&-1==[Number,Boolean].indexOf(n.constructor))throw Error("Expected Number, Boolean or Null; found "+n.constructor);for(n=e+c.offset;e<n;)e=w(d,a[b],e);c.be&&g(d,c.offset,e-c.offset,e)}return e}function C(a,c,d){d=void 0===d?0:d;f(c);if(c.offset+d>a.length)throw Error("Bad buffer length.");c.be&&g(a,c.offset,d,d+c.offset);var e=v(a,d);c.be&&g(a,c.offset,d,d+c.offset);return e}function D(a,c,d,e,
b){e=void 0===e?0:e;b=void 0===b?a.length:b;for(f(c);(b-e)%c.offset;)b--;for(var g=0;e<b;e+=c.offset,g++)d[g]=C(a,c,e)}var p=function(a,c){this.bits_=a;this.offset_=0;this.realBits_=this.bits_;this.lastByteMask_=255;a=Math.pow(2,this.bits_);c?(this.max_=a/2-1,this.min_=-a/2):(this.max_=a-1,this.min_=0);this.build_()};p.prototype.read=function(a,c){c=void 0===c?0:c;for(var d=0,b=0;b<this.offset_;b++)d+=a[c+b]*Math.pow(256,b);return this.overflow_(this.sign_(d))};p.prototype.write=function(a,c,d){d=
void 0===d?0:d;d=this.writeFirstByte_(a,this.overflow_(c),d);for(var b=2;b<this.offset_;b++,d++)a[d]=Math.floor(c/Math.pow(2,8*(b-1)))&255;8<this.bits_&&(a[d]=Math.floor(c/Math.pow(2,8*(this.offset_-1)))&this.lastByteMask_,d++);return d};p.prototype.build_=function(){this.setRealBits_();this.setLastByteMask_();this.offset_=8>this.bits_?1:Math.ceil(this.realBits_/8)};p.prototype.sign_=function(a){a>this.max_&&(a-=2*this.max_+2);return a};p.prototype.overflow_=function(a){if(a>this.max_)throw Error("Overflow.");
if(a<this.min_)throw Error("Underflow.");return a};p.prototype.setRealBits_=function(){this.realBits_=(this.bits_-1|7)+1};p.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits_);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};p.prototype.writeFirstByte_=function(a,c,d){a[d]=8>this.bits_?0>c?c+Math.pow(2,this.bits_):c:c&255;return d+1};var r=0===(new Uint8Array((new Uint32Array([1])).buffer))[0],x=r?1:0,y=r?0:1;r=new Int8Array(8);var q=new Uint32Array(r.buffer),t=new Float32Array(r.buffer),
z=new Float64Array(r.buffer),v,w,k={};b.unpackString=function(a,c,d){c=void 0===c?0:c;d=void 0===d?null:d;d=null!==d?c+d:a.length;for(var b="";c<d;){var f=128,g=191,l=!1,h=a[c++];if(0<=h&&127>=h)b+=String.fromCharCode(h);else{var k=0;194<=h&&223>=h?k=1:224<=h&&239>=h?(k=2,224===a[c]&&(f=160),237===a[c]&&(g=159)):240<=h&&244>=h?(k=3,240===a[c]&&(f=144),244===a[c]&&(g=143)):l=!0;h&=(1<<8-k-1)-1;for(var m=0;m<k;m++){if(a[c]<f||a[c]>g)l=!0;h=h<<6|a[c]&63;c++}l?b+=String.fromCharCode(65533):65535>=h?b+=
String.fromCharCode(h):(h-=65536,b+=String.fromCharCode((h>>10&1023)+55296,(h&1023)+56320))}}return b};b.packString=A;b.countString=function(a){for(var c=0,b=0;b<a.length;b++){var e=a.codePointAt(b);if(128>e)c++;else{var f=0;2047>=e?f=1:65535>=e?f=2:1114111>=e&&(f=3,b++);for(c++;0<f;)c++,f--}}return c};b.packStringTo=function(a,c,b){b=void 0===b?0:b;a=A(a);for(var d=0;d<a.length;d++)c[b++]=a[d];return b};b.pack=function(a,b){var c=[];B(a,b,c);return c};b.packTo=B;b.packArray=function(a,b){var c=[];
u(a,b,c);return c};b.packArrayTo=u;b.unpack=C;b.unpackArray=function(a,b,d,e){e=void 0===e?a.length:e;var c=[];D(a,b,c,void 0===d?0:d,e);return c};b.unpackArrayTo=D;return b}({});exports.unpackString = byteData.unpackString;exports.packString = byteData.packString;exports.packStringTo = byteData.packStringTo;exports.pack = byteData.pack;exports.packArray = byteData.packArray;exports.packTo = byteData.packTo;exports.packArrayTo = byteData.packArrayTo;exports.unpack = byteData.unpack;exports.unpackArray = byteData.unpackArray;exports.unpackArrayTo = byteData.unpackArrayTo;})));

(function (global, factory) {typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :typeof define === 'function' && define.amd ? define(['exports'], factory) :(factory((global.byteData = {})));}(this, (function (exports) {;'use strict';Object.defineProperty(exports, '__esModule', { value: true });var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(b,g,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,g,f){b!=Array.prototype&&b!=Object.prototype&&(b[g]=f.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,g,f,k){if(g){f=$jscomp.global;b=b.split(".");for(k=0;k<b.length-1;k++){var h=b[k];h in f||(f[h]={});f=f[h]}b=b[b.length-1];k=f[b];g=g(k);g!=k&&null!=g&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("String.prototype.codePointAt",function(b){return b?b:function(b){var f=$jscomp.checkStringArgs(this,null,"codePointAt"),g=f.length;b=Number(b)||0;if(0<=b&&b<g){b|=0;var h=f.charCodeAt(b);if(55296>h||56319<h||b+1===g)return h;b=f.charCodeAt(b+1);return 56320>b||57343<b?h:1024*(h-55296)+b+9216}}},"es6","es3");
var byteData=function(b){function g(a,c,d,e){d=void 0===d?0:d;e=void 0===e?a.length:e;if(e%c)throw Error("Bad buffer length.");for(;d<e;d+=c){var b=a,f=c,g=d;f--;for(var h=0;h<f;h++){var k=b[g+h];b[g+h]=b[g+f];b[g+f]=k;f--}}}function f(a){if(!a)throw Error("Undefined type.");if(a.float){if(-1==[16,32,64].indexOf(a.bits))throw Error("Bad float type.");}else if(1>a.bits||53<a.bits)throw Error("Bad type definition.");a.offset=8>a.bits?1:Math.ceil(a.bits/8);r=a.float?16==a.bits?C:32==a.bits?D:E:h;t=a.float?
16==a.bits?F:32==a.bits?G:H:I;l=new m(64==a.bits?32:a.bits,a.float?!1:a.signed)}function k(a,c,d,e,b){if(void 0===a)throw Error("Undefined value.");if(null!==a&&-1==[Number,Boolean].indexOf(a.constructor))throw Error("Expected number, boolean or null; found "+a.constructor);for(;e<b;)e=t(d,a,e);c.be&&g(d,c.offset,e-c.offset,e);return e}function h(a,c){return l.read(a,c)}function C(a,c){a=l.read(a,c);c=(a&31744)>>10;var d=a&1023;return(c?Math.pow(2,c-15)*(1+d/1024):d/1024*.00006103515625)*(a>>15?-1:
1)}function D(a,c){n[0]=l.read(a,c);return q[0]}function E(a,c){n[u]=l.read(a,c);n[v]=l.read(a,c+4);return w[0]}function I(a,c,d){return l.write(a,c,d)}function F(a,c,d){q[0]=c;var e=n[0];c=e>>16&32768;var b=e>>12&2047;e=e>>23&255;103<=e&&(c=(c|e-112<<10|b>>1)+(b&1));a[d++]=c&255;a[d++]=c>>>8&255;return d}function G(a,c,d){q[0]=c;return l.write(a,n[0],d)}function H(a,c,d){w[0]=c;d=l.write(a,n[u],d);return l.write(a,n[v],d)}function x(a){for(var c=[],d=0;d<a.length;d++){var e=a.codePointAt(d);if(128>
e)c.push(e);else{var b=0,f=0;2047>=e?(b=1,f=192):65535>=e?(b=2,f=224):1114111>=e&&(b=3,f=240,d++);for(c.push((e>>6*b)+f);0<b;)c.push(128|e>>6*(b-1)&63),b--}}return c}function y(a,c,d,e){e=void 0===e?0:e;f(c);return k(a,c,d,e,e+c.offset)}function z(a,c,d,e){e=void 0===e?0:e;f(c);for(var b=0;b<a.length;b++)e=k(a[b],c,d,e,e+c.offset);return e}function A(a,c,d){d=void 0===d?0:d;f(c);if(c.offset+d>a.length)throw Error("Bad buffer length.");c.be&&g(a,c.offset,d,d+c.offset);var e=r(a,d);c.be&&g(a,c.offset,
d,d+c.offset);return e}function B(a,c,d,e,b){e=void 0===e?0:e;for(b=void 0===b?a.length:b;(b-e)%c.offset;)b--;for(var f=0;e<b;e+=c.offset,f++)d[f]=A(a,c,e)}var m=function(a,c){this.bits_=a;this.offset_=0;this.realBits_=this.bits_;this.lastByteMask_=255;a=Math.pow(2,this.bits_);c?(this.max_=a/2-1,this.min_=-a/2):(this.max_=a-1,this.min_=0);this.build_()};m.prototype.read=function(a,c){c=void 0===c?0:c;for(var d=0,b=0;b<this.offset_;b++)d+=a[c+b]*Math.pow(256,b);return this.overflow_(this.sign_(d))};
m.prototype.write=function(a,c,d){d=void 0===d?0:d;d=this.writeFirstByte_(a,this.overflow_(c),d);for(var b=2;b<this.offset_;b++,d++)a[d]=Math.floor(c/Math.pow(2,8*(b-1)))&255;8<this.bits_&&(a[d]=Math.floor(c/Math.pow(2,8*(this.offset_-1)))&this.lastByteMask_,d++);return d};m.prototype.build_=function(){this.setRealBits_();this.setLastByteMask_();this.offset_=8>this.bits_?1:Math.ceil(this.realBits_/8)};m.prototype.sign_=function(a){a>this.max_&&(a-=2*this.max_+2);return a};m.prototype.overflow_=function(a){if(a>
this.max_)throw Error("Overflow.");if(a<this.min_)throw Error("Underflow.");return a};m.prototype.setRealBits_=function(){this.realBits_=(this.bits_-1|7)+1};m.prototype.setLastByteMask_=function(){var a=8-(this.realBits_-this.bits_);this.lastByteMask_=Math.pow(2,0<a?a:8)-1};m.prototype.writeFirstByte_=function(a,c,b){a[b]=8>this.bits_?0>c?c+Math.pow(2,this.bits_):c:c&255;return b+1};var p=0===(new Uint8Array((new Uint32Array([1])).buffer))[0],u=p?1:0,v=p?0:1;p=new Int8Array(8);var n=new Uint32Array(p.buffer),
q=new Float32Array(p.buffer),w=new Float64Array(p.buffer),r,t,l={};b.unpackString=function(a,c,b){c=void 0===c?0:c;b=void 0===b?null:b;b=null!==b?c+b:a.length;for(var d="";c<b;){var f=a[c++];if(0===f>>7)d+=String.fromCharCode(f);else{var g=0;6===f>>5?g=1:14===f>>4?g=2:30===f>>3&&(g=3);f&=(1<<8-g-1)-1;for(var h=0;h<g;h++)f=f<<6|a[c++]&63;65535>=f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10&1023)+55296,(f&1023)+56320))}}return d};b.packString=x;b.packStringTo=function(a,b,d){d=
void 0===d?0:d;a=x(a);for(var c=0;c<a.length;c++)b[d++]=a[c];return d};b.pack=function(a,b){var c=[];y(a,b,c);return c};b.packArray=function(a,b){var c=[];z(a,b,c);return c};b.packTo=y;b.packArrayTo=z;b.unpack=A;b.unpackArray=function(a,b,d,e){e=void 0===e?a.length:e;var c=[];B(a,b,c,void 0===d?0:d,e);return c};b.unpackArrayTo=B;return b}({});exports.unpackString = byteData.unpackString;exports.packString = byteData.packString;exports.packStringTo = byteData.packStringTo;exports.pack = byteData.pack;exports.packArray = byteData.packArray;exports.packTo = byteData.packTo;exports.packArrayTo = byteData.packArrayTo;exports.unpack = byteData.unpack;exports.unpackArray = byteData.unpackArray;exports.unpackArrayTo = byteData.unpackArrayTo;})));

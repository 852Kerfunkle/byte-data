/*! https://github.com/rochars/byte-data
Copyright (c) 2019 Rafael da Silva Rocha */
/*! https://mths.be/codepointat v0.2.0 by @mathias */
String.prototype.codePointAt||function(){var e=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}(),t=function(e){if(null==this)throw TypeError();var t=String(this),r=t.length,o=e?Number(e):0;if(o!=o&&(o=0),!(o<0||o>=r)){var n,c=t.charCodeAt(o);return c>=55296&&c<=56319&&r>o+1&&(n=t.charCodeAt(o+1))>=56320&&n<=57343?1024*(c-55296)+n-56320+65536:c}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t}(),function(){if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty;Object.defineProperty=function(t,r,o){if(e)try{return e(t,r,o)}catch(e){}if(t!==Object(t))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in o&&Object.prototype.__defineGetter__.call(t,r,o.get),Object.prototype.__defineSetter__&&"set"in o&&Object.prototype.__defineSetter__.call(t,r,o.set),"value"in o&&(t[r]=o.value),t}}}();var testObject={t:"o"},replaceGetOwnPropertyDescriptor=!1;try{Object.getOwnPropertyDescriptor(testObject,"t")}catch(e){replaceGetOwnPropertyDescriptor=!0}replaceGetOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(e,t){return null!=("function"==typeof e.__lookupGetter__&&"function"==typeof e.__lookupSetter__?e.__lookupGetter__(t)||e.__lookupSetter__(t):null)?{configurable:!0,enumerable:!0,get:e.__lookupGetter__(t),set:e.__lookupSetter__(t)}:{configurable:!0,writable:!0,enumerable:!0,value:e[t]}});;var byteData=(function(exports){var exports=exports||{};var l="function"==typeof Object.create?Object.create:function(b){function a(){}a.prototype=b;return new a},m;if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var n;a:{var p={g:!0},q={};try{q.__proto__=p;n=q.g;break a}catch(b){}n=!1}m=n?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null}
var t=m,u="function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)},v="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function w(b,a){if(a){for(var c=v,d=b.split("."),f=0;f<d.length-1;f++){var e=d[f];e in c||(c[e]={});c=c[e]}d=d[d.length-1];f=c[d];e=a(f);e!=f&&null!=e&&u(c,d,{configurable:!0,writable:!0,value:e})}}
w("String.prototype.codePointAt",function(b){return b?b:function(a){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var c=this.length;a=Number(a)||0;if(0<=a&&a<c){a|=0;var d=this.charCodeAt(a);if(55296>d||56319<d||a+1===c)return d;a=this.charCodeAt(a+1);return 56320>a||57343<a?d:1024*(d-55296)+a+9216}}});Object.defineProperty(exports,"__esModule",{value:!0});
function x(b,a,c,d){d=void 0===d?b.length:d;if(d%a)throw Error("Bad buffer length.");for(c=void 0===c?0:c;c<d;c+=a){var f=b,e=a,h=c;e--;for(var g=0;g<e;g++){var k=f[h+g];f[h+g]=f[h+e];f[h+e]=k;e--}}}function y(b,a,c){c=void 0===c?0:c;for(var d=0,f=b.length;d<f;d++){var e=b.codePointAt(d);if(128>e)a[c]=e,c++;else{var h=0,g=0;2047>=e?(h=1,g=192):65535>=e?(h=2,g=224):1114111>=e&&(h=3,g=240,d++);a[c]=(e>>6*h)+g;for(c++;0<h;)a[c]=128|e>>6*(h-1)&63,c++,h--}}return c}
function z(b,a){this.b=b;this.c=a;this.a=(1<<b-1)-1;this.f=Math.ceil((b+a)/8);this.h=Math.pow(2,this.a+1);this.i=b+a;this.j=Math.pow(2,-(8*this.f-1-b))}
z.prototype.pack=function(b,a,c){if("number"!=typeof a)throw new TypeError;Math.abs(a)>this.h-2*this.i&&(a=0>a?-Infinity:Infinity);var d=0>((a=+a)||1/a)?1:0>a?1:0;a=Math.abs(a);var f=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),e=A(a/Math.pow(2,f)*Math.pow(2,this.c));a!==a?(e=Math.pow(2,this.c-1),f=(1<<this.b)-1):0!==a&&(a>=Math.pow(2,1-this.a)?(2<=e/Math.pow(2,this.c)&&(f+=1,e=1),f>this.a?(f=(1<<this.b)-1,e=0):(f+=this.a,e=A(e)-Math.pow(2,this.c))):(e=A(a/Math.pow(2,1-this.a-this.c)),f=0));a=
[];a.push(d);for(d=this.b;0<d;--d)a[d]=f%2?1:0,f=Math.floor(f/2);d=a.length;for(f=this.c;0<f;--f)a[d+f]=e%2?1:0,e=Math.floor(e/2);d=a.join("");e=this.f+c-1;for(a=c;e>=c;)b[e]=parseInt(d.substring(0,8),2),d=d.substring(8),e--,a++;return a};
z.prototype.unpack=function(b,a){for(var c=(1<<this.b)-1,d="",f=this.f-1;0<=f;f--){var e=b[f+a].toString(2);d+="00000000".substring(e.length)+e}f="1"==d.charAt(0)?-1:1;d=d.substring(1);e=parseInt(d.substring(0,this.b),2);d=d.substring(this.b);if(e==c)return 0!==parseInt(d,2)?NaN:Infinity*f;0===e?(e+=1,c=parseInt(d,2)):c=parseInt("1"+d,2);return f*c*this.j*Math.pow(2,e-this.a)};function A(b){var a=Math.floor(b);b-=a;return.5>b?a:.5<b?a+1:a%2?a+1:a}
function B(b){this.bits=b;this.a=8>b?1:Math.ceil(b/8);this.max=Math.pow(2,b)-1;this.min=0;b=8-((b-1|7)+1-b);this.c=Math.pow(2,0<b?b:8)-1}B.prototype.pack=function(b,a,c){c=void 0===c?0:c;if(a!==a||"number"!=typeof a)throw new TypeError;C(this,a);c=void 0===c?0:c;b[c]=(0>a?a+Math.pow(2,this.bits):a)&255;c++;for(var d=this.a,f=2;f<d;f++)b[c]=Math.floor(a/Math.pow(2,8*(f-1)))&255,c++;8<this.bits&&(b[c]=Math.floor(a/Math.pow(2,8*(this.a-1)))&this.c,c++);return c};
B.prototype.unpack=function(b,a){var c=this.b(b,void 0===a?0:a);C(this,c);return c};B.prototype.b=function(b,a){a=void 0===a?0:a;for(var c=0,d=0;d<this.a;d++)c+=b[a+d]*Math.pow(256,d);return c};function C(b,a){if(a>b.max||a<b.min)throw new RangeError;}function D(b){B.call(this,b);this.max=Math.pow(2,this.bits)/2-1;this.min=-this.max-1}D.prototype=l(B.prototype);D.prototype.constructor=D;
if(t)t(D,B);else for(var E in B)if("prototype"!=E)if(Object.defineProperties){var F=Object.getOwnPropertyDescriptor(B,E);F&&Object.defineProperty(D,E,F)}else D[E]=B[E];D.prototype.pack=function(b,a,c){return B.prototype.pack.call(this,b,a,void 0===c?0:c)};D.prototype.unpack=function(b,a){var c=B.prototype.b.call(this,b,void 0===a?0:a);c>this.max&&(c-=2*this.max+2);C(this,c);return c};
function G(b,a,c){if(a){if(!b||16!==b&&32!==b&&64!==b)throw Error("Unsupported type: float, bits: "+b);a=16===b?new z(5,11):32===b?new z(8,23):new z(11,52)}else{if(!b||1>b||53<b)throw Error("Unsupported type: int, bits: "+b);a=c?new D(b):new B(b)}this.b=a;this.a=Math.ceil(b/8)}G.prototype.unpack=function(b,a){return this.b.unpack(b,void 0===a?0:a)};G.prototype.pack=function(b,a,c){return this.b.pack(b,a,void 0===c?0:c)};
function H(b,a,c,d){d=void 0===d?0:d;a=a||{};var f=new G(a.bits,a.fp,a.signed),e=0,h=d;try{for(var g=b.length;e<g;e++)d=f.pack(c,b[e],d);a.be&&x(c,f.a,h,d)}catch(k){I(k,b[e],e)}return d}
function J(b,a,c,d,f,e){d=void 0===d?0:d;f=void 0===f?b.length:f;e=void 0===e?!1:e;a=a||{};var h=new G(a.bits,a.fp,a.signed),g=h.a,k=(f-d)%g;if(e&&(k||b.length<g))throw Error("Bad buffer length");f-=k;e=0;k=d;try{for(a.be&&x(b,g,d,f);k<f;k+=g,e++)c[e]=h.unpack(b,k);a.be&&x(b,g,d,f)}catch(r){I(r,b.slice(k,k+g),k)}}function K(b,a,c,d){return H([b],a,c,void 0===d?0:d)}function L(b,a,c,d,f){d=void 0===d?b.length:d;var e=[];J(b,a,e,void 0===c?0:c,d,void 0===f?!1:f);return e}
function I(b,a,c){b.message=b.constructor.name+" at index "+c+": "+a;throw b;}exports.pack=function(b,a){var c=[];K(b,a,c);return c};exports.packArray=function(b,a){var c=[];H(b,a,c);return c};exports.packArrayTo=H;exports.packString=function(b){var a=[];y(b,a,0);return a};exports.packStringTo=function(b,a,c){return y(b,a,void 0===c?0:c)};exports.packTo=K;exports.unpack=function(b,a,c){c=void 0===c?0:c;return L(b,a,c,c+Math.ceil(a.bits/8),!0)[0]};exports.unpackArray=L;exports.unpackArrayTo=J;
exports.unpackString=function(b,a,c){c=void 0===c?b.length:c;var d=void 0===a?0:a;c=void 0===c?b.length:c;a="";for(d=void 0===d?0:d;d<c;){var f=128,e=191,h=!1,g=b[d++];if(0<=g&&127>=g)a+=String.fromCharCode(g);else{var k=0;194<=g&&223>=g?k=1:224<=g&&239>=g?(k=2,224===b[d]&&(f=160),237===b[d]&&(e=159)):240<=g&&244>=g?(k=3,240===b[d]&&(f=144),244===b[d]&&(e=143)):h=!0;g&=(1<<8-k-1)-1;for(var r=0;r<k;r++){if(b[d]<f||b[d]>e)h=!0;g=g<<6|b[d]&63;d++}h?a+=String.fromCharCode(65533):65535>=g?a+=String.fromCharCode(g):
(g-=65536,a+=String.fromCharCode((g>>10&1023)+55296,(g&1023)+56320))}}return a};typeof module!=='undefined'?module.exports=exports :typeof define==='function'&&define.amd?define(['exports'],exports) :typeof global!=='undefined'?global.byteData=exports:null;return exports;})();

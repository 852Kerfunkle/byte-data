/*
 https://github.com/rochars/byte-data
Copyright (c) 2019 Rafael da Silva Rocha */
'use strict';(function(){var g;if(!(g=!Object.defineProperty)){try{Object.defineProperty({},"x",{});var l=!0}catch(p){l=!1}g=!l}if(g){var m=Object.defineProperty;Object.defineProperty=function(g,l,h){if(m)try{return m(g,l,h)}catch(t){}if(g!==Object(g))throw TypeError("Object.defineProperty called on non-object");Object.prototype.__defineGetter__&&"get"in h&&Object.prototype.__defineGetter__.call(g,l,h.get);Object.prototype.__defineSetter__&&"set"in h&&Object.prototype.__defineSetter__.call(g,l,h.set);
"value"in h&&(g[l]=h.value);return g}}})();try{Object.getOwnPropertyDescriptor({t:"o"},"t")}catch(g){Object.getOwnPropertyDescriptor=function(l,m){return null!=("function"!==typeof l.__lookupGetter__||"function"!==typeof l.__lookupSetter__?null:l.__lookupGetter__(m)||l.__lookupSetter__(m))?{configurable:!0,enumerable:!0,get:l.__lookupGetter__(m),set:l.__lookupSetter__(m)}:{configurable:!0,writable:!0,enumerable:!0,value:l[m]}}}
var byteData=function(g){function l(b,a,c,d){d=void 0===d?b.length:d;if(d%a)throw Error("Bad buffer length.");for(c=void 0===c?0:c;c<d;c+=a){var e=b,f=a,g=c;f--;for(var k=0;k<f;k++){var h=e[g+k];e[g+k]=e[g+f];e[g+f]=h;f--}}}function m(b,a,c){c=void 0===c?0:c;for(var d=0,e=b.length;d<e;d++){var f=b.codePointAt(d);if(128>f)a[c]=f,c++;else{var g=0,k=0;2047>=f?(g=1,k=192):65535>=f?(g=2,k=224):1114111>=f&&(g=3,k=240,d++);a[c]=(f>>6*g)+k;for(c++;0<g;)a[c]=128|f>>6*(g-1)&63,c++,g--}}return c}function p(b,
a){this.b=b;this.c=a;this.a=(1<<b-1)-1;this.f=Math.ceil((b+a)/8);this.h=Math.pow(2,this.a+1);this.i=b+a;this.j=Math.pow(2,-(8*this.f-1-b))}function v(b){var a=Math.floor(b);b-=a;return.5>b?a:.5<b?a+1:a%2?a+1:a}function h(b){this.bits=b;this.a=8>b?1:Math.ceil(b/8);this.max=Math.pow(2,b)-1;this.min=0;b=8-((b-1|7)+1-b);this.c=Math.pow(2,0<b?b:8)-1}function t(b,a){if(a>b.max||a<b.min)throw new RangeError;}function n(b){h.call(this,b);this.max=Math.pow(2,this.bits)/2-1;this.min=-this.max-1}function u(b,
a,c){if(a){if(!b||16!==b&&32!==b&&64!==b)throw Error("Unsupported type: float, bits: "+b);a=16===b?new p(5,11):32===b?new p(8,23):new p(11,52)}else{if(!b||1>b||53<b)throw Error("Unsupported type: int, bits: "+b);a=c?new n(b):new h(b)}this.a=a;this.offset=Math.ceil(b/8)}function w(b,a,c,d){d=void 0===d?0:d;a=a||{};var e=new u(a.bits,a.fp,a.signed),f=0,g=d;try{for(var k=b.length;f<k;f++)d=e.pack(c,b[f],d);a.be&&l(c,e.offset,g,d)}catch(D){y(D,b[f],f)}return d}function z(b,a,c,d,e,f){d=void 0===d?0:d;
e=void 0===e?b.length:e;f=void 0===f?!1:f;a=a||{};var g=new u(a.bits,a.fp,a.signed),k=g.offset,h=(e-d)%k;if(f&&(h||b.length<k))throw Error("Bad buffer length");e-=h;f=0;h=d;try{for(a.be&&l(b,k,d,e);h<e;h+=k,f++)c[f]=g.unpack(b,h);a.be&&l(b,k,d,e)}catch(E){y(E,b.slice(h,h+k),h)}}function A(b,a,c,d){return w([b],a,c,void 0===d?0:d)}function B(b,a,c,d,e){d=void 0===d?b.length:d;var f=[];z(b,a,f,void 0===c?0:c,d,void 0===e?!1:e);return f}function y(b,a,c){b.message=b.constructor.name+" at index "+c+": "+
a;throw b;}g=g||{};var x="function"==typeof Object.create?Object.create:function(b){function a(){}a.prototype=b;return new a};if("function"==typeof Object.setPrototypeOf)var q=Object.setPrototypeOf;else{a:{var F={g:!0},C={};try{C.__proto__=F;q=C.g;break a}catch(b){}q=!1}q=q?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null}var G="function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&
(b[a]=c.value)},H="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;(function(b,a){if(a){var c=H;b=b.split(".");for(var d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];e=a(d);e!=d&&null!=e&&G(c,b,{configurable:!0,writable:!0,value:e})}})("String.prototype.codePointAt",function(b){return b?b:function(a){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");
var b=this.length;a=Number(a)||0;if(0<=a&&a<b){a|=0;var d=this.charCodeAt(a);if(55296>d||56319<d||a+1===b)return d;a=this.charCodeAt(a+1);return 56320>a||57343<a?d:1024*(d-55296)+a+9216}}});Object.defineProperty(g,"__esModule",{value:!0});p.prototype.pack=function(b,a,c){if("number"!=typeof a)throw new TypeError;Math.abs(a)>this.h-2*this.i&&(a=0>a?-Infinity:Infinity);var d=0>((a=+a)||1/a)?1:0>a?1:0;a=Math.abs(a);var e=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),f=v(a/Math.pow(2,e)*Math.pow(2,
this.c));a!==a?(f=Math.pow(2,this.c-1),e=(1<<this.b)-1):0!==a&&(a>=Math.pow(2,1-this.a)?(2<=f/Math.pow(2,this.c)&&(e+=1,f=1),e>this.a?(e=(1<<this.b)-1,f=0):(e+=this.a,f=v(f)-Math.pow(2,this.c))):(f=v(a/Math.pow(2,1-this.a-this.c)),e=0));a=[];a.push(d);for(d=this.b;0<d;--d)a[d]=e%2?1:0,e=Math.floor(e/2);d=a.length;for(e=this.c;0<e;--e)a[d+e]=f%2?1:0,f=Math.floor(f/2);d=a.join("");f=this.f+c-1;for(a=c;f>=c;)b[f]=parseInt(d.substring(0,8),2),d=d.substring(8),f--,a++;return a};p.prototype.unpack=function(b,
a){for(var c=(1<<this.b)-1,d="",e=this.f-1;0<=e;e--){var f=b[e+a].toString(2);d+="00000000".substring(f.length)+f}e="1"==d.charAt(0)?-1:1;d=d.substring(1);f=parseInt(d.substring(0,this.b),2);d=d.substring(this.b);if(f==c)return 0!==parseInt(d,2)?NaN:Infinity*e;0===f?(f+=1,c=parseInt(d,2)):c=parseInt("1"+d,2);return e*c*this.j*Math.pow(2,f-this.a)};h.prototype.pack=function(b,a,c){c=void 0===c?0:c;if(a!==a||"number"!=typeof a)throw new TypeError;t(this,a);c=void 0===c?0:c;b[c]=(0>a?a+Math.pow(2,this.bits):
a)&255;c++;for(var d=this.a,e=2;e<d;e++)b[c]=Math.floor(a/Math.pow(2,8*(e-1)))&255,c++;8<this.bits&&(b[c]=Math.floor(a/Math.pow(2,8*(this.a-1)))&this.c,c++);return c};h.prototype.unpack=function(b,a){b=this.b(b,void 0===a?0:a);t(this,b);return b};h.prototype.b=function(b,a){a=void 0===a?0:a;for(var c=0,d=0;d<this.a;d++)c+=b[a+d]*Math.pow(256,d);return c};n.prototype=x(h.prototype);n.prototype.constructor=n;if(q)q(n,h);else for(var r in h)"prototype"!=r&&(Object.defineProperties?(x=Object.getOwnPropertyDescriptor(h,
r))&&Object.defineProperty(n,r,x):n[r]=h[r]);n.prototype.pack=function(b,a,c){return h.prototype.pack.call(this,b,a,void 0===c?0:c)};n.prototype.unpack=function(b,a){b=h.prototype.b.call(this,b,void 0===a?0:a);b>this.max&&(b-=2*this.max+2);t(this,b);return b};u.prototype.unpack=function(b,a){return this.a.unpack(b,void 0===a?0:a)};u.prototype.pack=function(b,a,c){return this.a.pack(b,a,void 0===c?0:c)};g.pack=function(b,a){var c=[];A(b,a,c);return c};g.packArray=function(b,a){var c=[];w(b,a,c);return c};
g.packArrayTo=w;g.packString=function(b){var a=[];m(b,a,0);return a};g.packStringTo=function(b,a,c){return m(b,a,void 0===c?0:c)};g.packTo=A;g.unpack=function(b,a,c){c=void 0===c?0:c;return B(b,a,c,c+Math.ceil(a.bits/8),!0)[0]};g.unpackArray=B;g.unpackArrayTo=z;g.unpackString=function(b,a,c){c=void 0===c?b.length:c;var d=void 0===a?0:a;c=void 0===c?b.length:c;a="";for(d=void 0===d?0:d;d<c;){var e=128,f=191,g=!1,k=b[d++];if(0<=k&&127>=k)a+=String.fromCharCode(k);else{var h=0;194<=k&&223>=k?h=1:224<=
k&&239>=k?(h=2,224===b[d]&&(e=160),237===b[d]&&(f=159)):240<=k&&244>=k?(h=3,240===b[d]&&(e=144),244===b[d]&&(f=143)):g=!0;k&=(1<<8-h-1)-1;for(var l=0;l<h;l++){if(b[d]<e||b[d]>f)g=!0;k=k<<6|b[d]&63;d++}g?a+=String.fromCharCode(65533):65535>=k?a+=String.fromCharCode(k):(k-=65536,a+=String.fromCharCode((k>>10&1023)+55296,(k&1023)+56320))}}return a};"undefined"!==typeof module?module.exports=g:"function"===typeof define&&define.amd?define(["exports"],g):"undefined"!==typeof global?global.byteData=g:null;
return g}();
